<?xml version="1.0" encoding="utf-8" ?>
<!-- Copyright 2022 ACSONE SA/NV
     License LGPL-3.0 or later (http://www.gnu.org/licenses/LGPL). -->
<odoo>
  <record model="fastapi.endpoint" id="fastapi_endpoint_demo">
    <field name="name">Fastapi Demo Endpoint</field>
    <field
            name="description"
        ><![CDATA[
# A Dummy FastApi Demo

## HOWTO

This demo endpoint has been created by inhering from "fastapi.endpoint", registering
a new app into the app selection field and implementing the `_get_fastapi_routers`
methods.

```python
from typing import List

from fastapi import APIRouter

from odoo import fields, models


class FastapiEndpoint(models.Model):

    _inherit = "fastapi.endpoint"

    app: str = fields.Selection(
        selection_add=[("demo", "Demo Endpoint")], ondelete={"demo": "cascade"}
    )

    def _get_fastapi_routers(self) -> List[APIRouter]:
        if self.app == "demo":
            return [demo_api_router]
        return super()._get_fastapi_routers()


demo_api_router = APIRouter()


@demo_api_router.get("/")
async def read_root():
    return {"Hello": "World"}

```

]]></field>
    <field name="app">demo</field>
    <field name="root_path">/fastapi_demo</field>
    <field name="demo_auth_method">http_basic</field>
  </record>
</odoo>
