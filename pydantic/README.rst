========
Pydantic
========

.. !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
   !! This file is generated by oca-gen-addon-readme !!
   !! changes will be overwritten.                   !!
   !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

.. |badge1| image:: https://img.shields.io/badge/maturity-Beta-yellow.png
    :target: https://odoo-community.org/page/development-status
    :alt: Beta
.. |badge2| image:: https://img.shields.io/badge/licence-LGPL--3-blue.png
    :target: http://www.gnu.org/licenses/lgpl-3.0-standalone.html
    :alt: License: LGPL-3
.. |badge3| image:: https://img.shields.io/badge/github-oca%2Frest--framework-lightgray.png?logo=github
    :target: https://github.com/oca/rest-framework/tree/14.0/pydantic
    :alt: oca/rest-framework

|badge1| |badge2| |badge3| 

This addon allows you to define inheritable `Pydantic classes <https://pydantic-docs.helpmanual.io/>`_.

**Table of contents**

.. contents::
   :local:

Usage
=====

To define your own pydantic model you just need to create a class that inherits from
``odoo.addons.pydantic.models.BaseModel``

.. code-block:: python

    from odoo.addons.pydantic.models import BaseModel
    from pydantic import Field


    class PartnerShortInfo(BaseModel):
        _name = "partner.short.info"
        id: str
        name: str


    class PartnerInfo(BaseModel):
        _name = "partner.info"
        _inherit = "partner.short.info"

        street: str
        street2: str = None
        zip_code: str = None
        city: str
        phone: str = None
        is_componay : bool = Field(None)


As for odoo models, you can extend the `base` pydantic model by inheriting of `base`.

.. code-block:: python

    class Base(BaseModel):
        _inherit = "base"

        def _my_method(self):
            pass

Pydantic model classes are available through the `pydantic_registry` registry provided by the Odoo's environment.

To support pydantic models that map to Odoo models, Pydantic model instances can
be created from arbitrary odoo model instances by mapping fields from odoo
models to fields defined by the pydantic model. To ease the mapping,
your pydantic model should inherit from 'odoo_orm_mode'

.. code-block:: python

        class UserInfo(models.BaseModel):
            _name = "user"
            _inherit = "odoo_orm_mode"
            name: str
            groups: List["group"] = pydantic.Field(alias="groups_id")


        class Group(models.BaseModel):
            _name="group"
            _inherit = "odoo_orm_mode"
            name: str

        user = self.env.user
        UserInfoCls = self.env.pydantic_registry["user"]
        user_info = UserInfoCls.from_orm(user)

See the official Pydantic documentation_ to discover all the available functionalities.

.. _documentation: https://pydantic-docs.helpmanual.io/

Known issues / Roadmap
======================

The `roadmap <https://github.com/OCA/rest-framework/issues?q=is%3Aopen+is%3Aissue+label%3Aenhancement+label%3Apydantic>`_
and `known issues <https://github.com/OCA/rest-framework/issues?q=is%3Aopen+is%3Aissue+label%3Abug+label%3Apydantic>`_ can
be found on GitHub.

Bug Tracker
===========

Bugs are tracked on `GitHub Issues <https://github.com/oca/rest-framework/issues>`_.
In case of trouble, please check there if your issue has already been reported.
If you spotted it first, help us smashing it by providing a detailed and welcomed
`feedback <https://github.com/oca/rest-framework/issues/new?body=module:%20pydantic%0Aversion:%2014.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.

Do not contact contributors directly about support or help with technical issues.

Credits
=======

Authors
~~~~~~~

* ACSONE SA/NV

Contributors
~~~~~~~~~~~~

* Laurent Mignon <laurent.mignon@acsone.eu>

Maintainers
~~~~~~~~~~~

.. |maintainer-lmignon| image:: https://github.com/lmignon.png?size=40px
    :target: https://github.com/lmignon
    :alt: lmignon

Current maintainer:

|maintainer-lmignon| 

This module is part of the `oca/rest-framework <https://github.com/oca/rest-framework/tree/14.0/pydantic>`_ project on GitHub.

You are welcome to contribute.
